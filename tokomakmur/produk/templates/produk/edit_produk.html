{% extends "layouts.html" %}
{% block title %}Edit Produk{% endblock %}
{% load static %}

{% block content %}
<h2 class="text-2xl font-bold mb-6 text-[#F297A0]">Edit Produk</h2>

<form action="{% url 'edit_produk' produk.id %}" method="post" enctype="multipart/form-data" class="bg-white p-6 rounded-2xl shadow-lg max-w-xl">
  {% csrf_token %}

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Kode Produk</label>
    <input type="text" name="kode_produk" value="{{ produk.kode_produk }}" required class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Nama Produk</label>
    <input type="text" name="nama" value="{{ produk.nama }}" required class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Kategori</label>
    <select name="kategori" class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
      {% for k in kategori_list %}
        <option value="{{ k.id }}" {% if produk.kategori.id == k.id %}selected{% endif %}>{{ k.nama }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Satuan</label>
    <select name="satuan" class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
      {% for s in satuan %}
        <option value="{{ s.id }}" {% if produk.satuan.id == s.id %}selected{% endif %}>{{ s.nama }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Pemasok</label>
    <select name="pemasok" class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
      {% for p in pemasok %}
        <option value="{{ p.id }}" {% if produk.pemasok.id == p.id %}selected{% endif %}>{{ p.nama }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Stok</label>
    <input type="number" name="stok" value="{{ produk.stok }}" required class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
  </div>

  <div class="mb-4">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Harga Beli</label>
    <input type="number" name="harga_beli" value="{{ produk.harga_beli }}" required class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
  </div>

<div class="mb-4">
  <label class="block text-sm font-medium text-[#7A8450] mb-1">Harga Jual</label>
  <input 
    type="number" 
    name="harga_jual" 
    value="{{ produk.harga_jual }}" 
    step="1" 
    min="0" 
    required 
    class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]"
    placeholder="Contoh: 15000">
</div>
  <div class="mb-6">
    <label class="block text-sm font-medium text-[#7A8450] mb-1">Gambar</label>
    {% if produk.gambar %}
      <img src="{{ produk.gambar.url }}" class="w-24 h-24 object-cover rounded-xl border mb-2">
    {% endif %}
    <input type="file" name="gambar" class="w-full border border-[#F297A0] rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#F297A0]">
  </div>

  <div class="flex justify-end gap-2">
    <a href="{% url 'daftar_produk' %}" class="px-4 py-2 bg-[#F3EBDB] text-[#7A8450] rounded-lg hover:bg-[#e4dccb] transition-all">Batal</a>
    <button type="submit" class="px-4 py-2 bg-[#F297A0] text-white rounded-lg hover:bg-[#e1858b] transition-all">Simpan</button>
  </div>
</form>
{% endblock %}
